@using Microsoft.AspNetCore.Identity
@using ProjectInit.Repositories.Models
@model UserListItemModel

@{
    var roles = ViewBag.Roles as List<IdentityRole<Guid>>;
}

<div class="pagetitle">
    <div class="float-end">
        <a href="/user/index" class="btn btn-outline-dark btn-small">Повернутися до списку</a>
    </div>
    <h1>Користувачі</h1>
    <nav>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">Головна</a></li>
            <li class="breadcrumb-item active">Користувачі</li>
        </ol>
    </nav>
</div><!-- End Page Title -->

<section class="section">
    <div class="row">
        <div class="col-lg-6">

            <div class="card">
                <div class="card-body">
                    <br />
                    <form asp-action="Edit">
                        @Html.AntiForgeryToken()

                        <input asp-for="Id" type="hidden" />

                        <div class="mb-3">
                            <label asp-for="FullName" class="form-label"></label>
                            <input asp-for="FullName" class="form-control" />
                            <span asp-validation-for="FullName" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="Email" class="form-label"></label>
                            <input asp-for="Email" class="form-control" />
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="Roles" class="form-label"></label>
                            <select class="form-select" size="3" id="roles" name="roles" multiple>
                                @foreach (var r in roles)
                                {
                                    var selected = @Model.Roles.Any(x => x.Name == r.Name) ? true : false;
                                    <!option value="@r.Name" @(selected ? "selected" : "")>@r.Name</!option>
                                }
                            </select>
                        </div>
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" asp-for="IsEmailConfirmed">
                                <label class="form-check-label" asp-for="IsEmailConfirmed"></label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <button class="btn btn-primary" type="submit">Зберегти</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>


@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <link href="~/lib/select2/css/select2.min.css" rel="stylesheet" />
    <script src="~/lib/select2/js/select2.full.min.js"></script>    
    
    <script>
        $(function () {
            $("#roles").select2();
        })
    </script>
}

